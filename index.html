<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CFU Strategy Planner</title>
    <style>
        :root {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-main: #e0e0e0;
            --text-dim: #a0a0a0;
            --accent: #4caf50; /* Verde Matematico */
            --accent-dim: #2e7d32;
            --scenario-a: #e57373; /* Rosso Guerra */
            --scenario-b: #64b5f6; /* Blu Costante */
            --scenario-c: #ffd54f; /* Giallo Realista */
            --font-stack: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: var(--font-stack);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            width: 100%;
        }

        h1 {
            font-weight: 700;
            letter-spacing: -1px;
            margin-bottom: 10px;
            text-transform: uppercase;
            font-size: 1.5rem;
            border-bottom: 2px solid var(--accent);
            display: inline-block;
            padding-bottom: 5px;
        }

        .subtitle {
            color: var(--text-dim);
            font-size: 0.9rem;
            margin-bottom: 30px;
        }

        /* INPUT SECTION */
        .input-group {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            display: grid;
            grid-template-columns: 2fr 1fr auto;
            gap: 15px;
            align-items: end;
            margin-bottom: 30px;
        }

        label {
            display: block;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-dim);
            margin-bottom: 5px;
        }

        input {
            background: #2c2c2c;
            border: 1px solid #444;
            color: white;
            padding: 12px;
            border-radius: 4px;
            width: 100%;
            box-sizing: border-box;
            font-size: 1rem;
            font-family: inherit;
        }

        input:focus {
            outline: none;
            border-color: var(--accent);
        }

        button {
            background: var(--accent);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: background 0.2s;
            height: 46px;
        }

        button:hover {
            background: var(--accent-dim);
        }

        /* OUTPUT SECTION */
        #results-area {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 6px;
            text-align: center;
            border: 1px solid #333;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-main);
            display: block;
            margin-top: 5px;
        }

        .stat-sub {
            font-size: 0.8rem;
            color: var(--text-dim);
        }

        /* SCENARIOS */
        .scenarios-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .scenario-card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            border-top: 4px solid;
            display: flex;
            flex-direction: column;
        }

        .sc-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .sc-title {
            font-weight: 700;
            text-transform: uppercase;
            font-size: 0.9rem;
        }

        .sc-days {
            font-size: 1.5rem;
            font-weight: 800;
        }

        .sc-desc {
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-bottom: 15px;
            line-height: 1.4;
        }

        /* MINI CALENDAR */
        .mini-calendar {
            display: grid;
            grid-template-columns: repeat(12, 1fr); /* 12 mesi */
            gap: 2px;
            margin-top: auto;
            padding-top: 15px;
            border-top: 1px solid #333;
        }

        .cal-month {
            display: flex;
            flex-direction: column;
            gap: 1px;
        }

        .month-label {
            font-size: 8px;
            text-align: center;
            color: var(--text-dim);
            margin-bottom: 2px;
        }

        .days-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* 2 colonne di giorni per mese per compattezza */
            gap: 1px;
        }

        .day-dot {
            width: 3px;
            height: 3px;
            background-color: #333;
            border-radius: 50%;
        }

        .day-active {
            background-color: currentColor; /* Prende il colore del bordo della card */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 600px) {
            .input-group { grid-template-columns: 1fr; }
            .mini-calendar { grid-template-columns: repeat(6, 1fr); gap: 5px; } /* 6 mesi su mobile */
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Strategic Study Planner</h1>
    <div class="subtitle">Calcolo operativo basato su 1 CFU = 25h totali (Ratio Lezione/Studio: 1:2.75)</div>

    <div class="input-group">
        <div>
            <label>Nome Esame(i)</label>
            <input type="text" id="examName" placeholder="Es. Analisi + Geometria">
        </div>
        <div>
            <label>Totale CFU</label>
            <input type="number" id="cfuValue" placeholder="12" min="1">
        </div>
        <button onclick="calculateStrategy()">Calcola</button>
    </div>

    <div id="results-area">
        <div class="stats-grid">
            <div class="stat-card">
                <label>Carico Totale</label>
                <span class="stat-value" id="totalHours">0</span>
                <span class="stat-sub">Ore complessive (Legge)</span>
            </div>
            <div class="stat-card" style="border-color: #d32f2f;">
                <label>Ore "Frontali"</label>
                <span class="stat-value" id="lessonHours">0</span>
                <span class="stat-sub">Lezioni (40 lez x 12CFU)</span>
            </div>
            <div class="stat-card" style="border-color: var(--accent);">
                <label>Studio Autonomo</label>
                <span class="stat-value" id="studyHours">0</span>
                <span class="stat-sub">Ore nette da fare a casa</span>
            </div>
        </div>

        <div class="scenarios-container">
            <div class="scenario-card" style="border-color: var(--scenario-a); color: var(--scenario-a);">
                <div class="sc-header">
                    <span class="sc-title">Scenario A: Guerra</span>
                </div>
                <div class="sc-days"><span id="daysA">0</span> Giorni</div>
                <div class="sc-desc">Ritmo: <strong>8 ore/die</strong>.<br>Sessione intensiva. Modalit√† disperata. Deep work assoluto.</div>
                <div class="mini-calendar" id="calA"></div>
            </div>

            <div class="scenario-card" style="border-color: var(--scenario-b); color: var(--scenario-b);">
                <div class="sc-header">
                    <span class="sc-title">Scenario B: Costante</span>
                </div>
                <div class="sc-days"><span id="daysB">0</span> Giorni</div>
                <div class="sc-desc">Ritmo: <strong>4 ore/die</strong>.<br>Sostenibile a lungo termine. Lascia spazio al riposo.</div>
                <div class="mini-calendar" id="calB"></div>
            </div>

            <div class="scenario-card" style="border-color: var(--scenario-c); color: var(--scenario-c);">
                <div class="sc-header">
                    <span class="sc-title">Scenario C: Realista</span>
                </div>
                <div class="sc-days"><span id="daysC">0</span> Giorni</div>
                <div class="sc-desc">Ritmo: <strong>2.5 ore/die</strong>.<br>Giornate "no", imprevisti, o studio parallelo ad altro.</div>
                <div class="mini-calendar" id="calC"></div>
            </div>
        </div>
    </div>
</div>

<script>
    function calculateStrategy() {
        const cfu = parseFloat(document.getElementById('cfuValue').value);
        if (!cfu || cfu <= 0) {
            alert("Inserisci un numero di CFU valido.");
            return;
        }

        // 1. Math Logic (Mentor's Logic)
        const HOURS_PER_CFU = 25;
        const totalHours = cfu * HOURS_PER_CFU;
        
        // Ratio: 12 CFU = 80 hours lesson. 
        // Factor = 80/12 = 6.6667 hours lesson per CFU.
        const lessonHoursPerCfu = 80 / 12;
        const lessonHours = Math.round(cfu * lessonHoursPerCfu);
        
        const studyHours = totalHours - lessonHours;

        // 2. Update Stats
        document.getElementById('totalHours').innerText = totalHours;
        document.getElementById('lessonHours').innerText = lessonHours;
        document.getElementById('studyHours').innerText = studyHours;

        // 3. Calculate Scenarios (Days needed)
        // Scenario A: 8h/day
        const daysA = Math.ceil(studyHours / 8);
        // Scenario B: 4h/day
        const daysB = Math.ceil(studyHours / 4);
        // Scenario C: 2.5h/day
        const daysC = Math.ceil(studyHours / 2.5);

        document.getElementById('daysA').innerText = daysA;
        document.getElementById('daysB').innerText = daysB;
        document.getElementById('daysC').innerText = daysC;

        // 4. Draw Calendars
        drawCalendar('calA', daysA);
        drawCalendar('calB', daysB);
        drawCalendar('calC', daysC);

        document.getElementById('results-area').style.display = 'block';
    }

    function drawCalendar(elementId, durationDays) {
        const container = document.getElementById(elementId);
        container.innerHTML = '';
        
        const today = new Date();
        const endDate = new Date();
        endDate.setDate(today.getDate() + durationDays);

        // Generate next 12 months roughly
        const months = ['Gen', 'Feb', 'Mar', 'Apr', 'Mag', 'Giu', 'Lug', 'Ago', 'Set', 'Ott', 'Nov', 'Dic'];
        let currentMonthIdx = today.getMonth();

        for (let i = 0; i < 12; i++) {
            let mIdx = (currentMonthIdx + i) % 12;
            let monthDiv = document.createElement('div');
            monthDiv.className = 'cal-month';
            
            // Label
            let label = document.createElement('div');
            label.className = 'month-label';
            label.innerText = months[mIdx];
            monthDiv.appendChild(label);

            // Dots grid (simplified: 30 dots per month approx)
            let dotsGrid = document.createElement('div');
            dotsGrid.className = 'days-grid';

            // Check if this month is in the range
            // This is a visual approximation for minimalism
            let yearOffset = Math.floor((currentMonthIdx + i) / 12);
            let checkDateStart = new Date(today.getFullYear() + yearOffset, mIdx, 1);
            let checkDateEnd = new Date(today.getFullYear() + yearOffset, mIdx + 1, 0);

            // Draw roughly 20 dots to represent the month visually
            for(let d=0; d<14; d++) {
                let dot = document.createElement('div');
                dot.className = 'day-dot';
                
                // Logic to color dots:
                // We calculate if the "study period" covers this relative portion of time
                let daysFromStart = (i * 30) + (d * 2); // rough day approximation
                
                if (daysFromStart < durationDays) {
                    dot.classList.add('day-active');
                }
                
                dotsGrid.appendChild(dot);
            }
            
            monthDiv.appendChild(dotsGrid);
            container.appendChild(monthDiv);
        }
    }
</script>

</body>
</html>